<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MetroWave</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.2/Sortable.min.js" integrity="sha256-ymhDBwPE9ZYOkHNYZ8bpTSm1o943EH2BAOWjAQB+nm4=" crossorigin="anonymous"></script>
  <style>
    /* Custom styles to improve UI elements */
    .styled-select {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      padding-right: 30px; /* space for arrow */
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23cccccc%22%20d%3D%22M287%2069.4a17.6%2017.6%0A%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-13%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2013l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095.2c3.6-3.6%205.4-7.8%205.4-13%200-5-1.8-9.2-5.4-13z%22%2F%3E%3C%2Fsvg%3E');
      background-repeat: no-repeat;
      background-position: right 12px top 50%;
      background-size: .65em auto;
    }
    .player-left-controls button:hover svg, .player-right-controls button:hover svg {
      transform: scale(1.1);
      opacity: 1;
    }
    .nav-buttons svg, .sidebar-bottom svg {
      width: 20px; 
      height: 20px; 
      opacity: 0.8;
    }
  </style>
</head>
<body data-theme="default">

  <template id="template-home">
    <div class="view-header"><h1>Home</h1></div>
    <section class="content-section" data-section-id="recently-played-section">
      <div class="section-header">
        <h2>Recently Played</h2>
        <button id="clear-recently-played-btn" class="clear-btn" style="display: none;">Clear</button>
      </div>
      <div id="recently-played" class="grid-container"></div>
    </section>
    <section class="content-section" data-section-id="favorites-section">
      <h2>Favorites</h2>
      <div id="liked-songs" class="grid-container"></div>
    </section>
  </template>

  <template id="template-explore">
    <div class="view-header"><h1>Explore</h1></div>
    <div id="explore-content"></div>
  </template>

  <template id="template-playlists">
    <div class="view-header">
      <div class="section-header" style="margin:0;">
        <h1>Your Playlists</h1>
        <div style="display: flex; gap: 10px;">
          <button id="import-playlist-btn" class="action-btn" style="background: #555;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path></svg>
            Import
          </button>
          <button id="create-playlist-btn" class="action-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            New Playlist
          </button>
        </div>
      </div>
    </div>
    <section class="content-section">
      <div id="playlists-grid" class="grid-container" style="margin-top: 20px;">
        <p>You haven't created any playlists yet.</p>
      </div>
    </section>
  </template>

  <template id="template-settings">
    <div class="view-header"><h1>Settings</h1></div>
    <section class="content-section">
        <h3>Appearance</h3>
        <div class="settings-row">
          <label for="theme-select">Theme</label>
          <select id="theme-select" class="styled-select">
            <option value="default">Default Dark</option>
            <option value="darker">Deep Ocean</option>
            <option value="crimson">Crimson Night</option>
            <option value="glass">Frosted Glass</option>
            <option value="dynamic">Dynamic (Album Art)</option>
          </select>
        </div>
        <div class="settings-row">
            <label for="animations-toggle">Enable Animations</label>
            <label class="switch">
                <input type="checkbox" id="animations-toggle">
                <span class="slider round"></span>
            </label>
        </div>
        <p class="settings-note">The Dynamic theme changes the app's accent color based on the currently playing song's artwork.</p>

        <h3>Localization</h3>
        <div class="settings-row">
          <label for="country-select">Content Region</label>
          <select id="country-select" class="styled-select">
              <option value="US">United States</option>
              <option value="IN">India</option>
              <option value="GB">United Kingdom</option>
              <option value="JP">Japan</option>
              <option value="DE">Germany</option>
              <option value="BR">Brazil</option>
              <option value="CA">Canada</option>
              <option value="AU">Australia</option>
          </select>
        </div>
        <p class="settings-note">This setting helps guide content on the Explore page, but your recommendations are primarily driven by your listening activity.</p>
        
        <h3>Info and About</h3>
        <b><p>Version: 1.0.1</p></b>
        <p>MetroWave is a passion project and a continuous work-in-progress. Version 1.0.0 is the result of a one-manned team and it might break when my music source gets down, bear with me, haha! This means that changes from YouTube might occasionally cause features to break. Your feedback and bug reports are incredibly valuable!</p>
        
        <div class="social-links">
          <b>Connect with me:</b>
          <a href="https://github.com/Ashmil-Kurikkal" target="_blank" rel="noopener noreferrer" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg> GitHub</a>
          <a href="https://www.linkedin.com/in/ashmil-kurikkal" target="_blank" rel="noopener noreferrer" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg> LinkedIn</a>
          <a href="https://www.instagram.com/ashmilkurikkal" target="_blank" rel="noopener noreferrer" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="18.5" y1="5.5" x2="18.51" y2="5.5"></line></svg> Instagram</a>
        </div>
    </section>
  </template>

  <div id="app">
    <aside class="sidebar glass">
      <div class="logo">MetroWave</div>
      <nav class="nav-buttons">
        <button id="nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg> Home</button>
        <button id="nav-explore"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon></svg> Explore</button>
        <button id="nav-playlists"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg> Playlists</button>
      </nav>
      <div class="sidebar-bottom">
        <button id="nav-settings"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg> Settings</button>
      </div>
    </aside>

    <main class="content glass">
      <div class="titlebar">
        <div class="titlebar-drag-region"></div>
        <div class="titlebar-controls">
          <button id="minimize-btn" class="titlebar-button" title="Minimize"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>
          <button id="maximize-btn" class="titlebar-button" title="Maximize"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg></button>
          <button id="close-btn" class="titlebar-button" title="Close"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
        </div>
      </div>
      <div class="top-bar transparent">
        <div class="navigation-controls">
          <button id="nav-back" title="Go Back" disabled><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg></button>
          <button id="nav-forward" title="Go Forward" disabled><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></button>
        </div>
        <form id="search-form">
          <input type="text" id="search-input" class="search-input" placeholder="Search for songs, artists, albums..." autocomplete="off"/>
          <div id="search-suggestions" class="suggestions-container"></div>
        </form>
      </div>
      <div id="main-view" class="main-view"></div>
    </main>

    <aside class="right-pane glass">
      <div class="pane-header">
        <h3>Queue</h3>
      </div>
      <div class="right-pane-content">
        <ul class="queue-list" id="queue-list"></ul>
        <div id="recommendations-section" style="display: none;">
          <div class="recommendations-header">
            <h4>Recommendations</h4>
          </div>
          <ul id="up-next-list" class="queue-list recommendations-list"></ul>
        </div>
      </div>
    </aside>
  </div>

  <footer id="player-bar">
    <div class="progress-loading-overlay" id="loading-overlay" style="display: none;"></div>
    
    <div class="player-bar-content">
      <div class="player-left-controls">
        <button id="prev-btn" title="Previous"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg></button>
        <button id="play-pause-btn" title="Play/Pause">
          <svg id="play-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
          <svg id="pause-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
        </button>
        <button id="next-btn" title="Next"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line></svg></button>
      </div>
      
      <div class="now-playing-info" id="now-playing-info" style="display: none;">
        <img id="player-thumbnail" src="" alt="Thumbnail" />
        <div class="song-details">
          <div id="current-song-title">No song playing</div>
          <div id="current-song-artist">–</div>
        </div>
      </div>
      
      <div id="player-progress">
        <span id="current-time">0:00</span>
        <input type="range" id="progress" min="0" max="100" value="0" />
        <span id="duration">0:00</span>
      </div>
      
      <div class="player-right-controls">
        <button id="like-btn" title="Favorite"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></button>
        <button id="add-to-playlist-btn" title="Add to Playlist"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button>
        <button id="download-btn" title="Download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg></button>
        <button id="video-btn" title="Play Video"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="11"></line></svg></button>
        <input type="range" id="volume" min="0" max="1" step="0.01" value="1" />
      </div>
    </div>
  </footer>

  <audio id="audioPlayer"></audio>
  <div id="video-player-container" class="video-player-container">
    <button id="video-close-btn" class="video-close-btn">&times;</button>
    <div id="video-content">
      <video id="local-video-player" width="100%" height="100%" controls></video>
    </div>
  </div>
  <div id="notification-container" class="notification-container"></div>
  <div id="context-menu" class="context-menu" style="display: none;">
    <ul>
      <li id="context-menu-add-queue"><a><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg> Add to Queue</a></li>
      <li class="has-submenu" id="context-menu-add-playlist">
        <a><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Add to Playlist</a>
        <ul class="submenu" id="context-menu-playlists"></ul>
      </li>
      <li id="context-menu-add-favorite"><a><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg> Add to Favorites</a></li>
    </ul>
  </div>
  <div id="player-playlist-menu" class="context-menu" style="display: none;">
    <ul id="player-playlist-menu-list"></ul>
  </div>
  <div id="create-playlist-modal" class="modal-backdrop" style="display: none;">
    <div class="modal-content">
      <h3>Create New Playlist</h3>
      <input type="text" id="new-playlist-name-input" placeholder="My Awesome Mix" autocomplete="off">
      <div class="modal-actions">
        <button id="modal-cancel-btn" class="action-btn" style="background: #555;">Cancel</button>
        <button id="modal-create-btn" class="action-btn">Create</button>
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>